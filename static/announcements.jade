mixin announcementBlock(data)
	div(class="announcement-div")
		h2(class="announcement-title")=data.title
		label(class="date-label")=data.date
		p(class="announcement-content")=data.content
		
mixin adminAnnouncementBlock(data)
	div(class="announcement-div")
		h2(class="announcement-title")=data.title
		label(class="date-label")=data.date
		p(class="announcement-content")=data.content
		
		div(class="modify-buttons")
			-var deleteButtonId = data.id + "-delete-button"
			button(id=deleteButtonId class="delete-button" onclick="deleteClicked(this)") Delete
		
if(view == 'student' || view == 'guest')
	div(id="announcements-div")
		each val in announcements
			+announcementBlock(val)
			
else if(view == 'admin')
	div(id="announcements-div")
		
		h2(id="add-announcement-status" class="status-message")=addAnnouncementStatus
		
		button(id="show-add-form-button") Add
		
		div(id="add-announcement-form")
			form(id="add-course-link-form" action="/add-announcement" method="POST")
				h1 Make an announcement
				p Please fill out all fields
				
				label(id="add-announcement-name-label" class="add-form-label") 
					strong Title
					
				input(id="add-announcement-title" type="text" name="announcement-title" size="30" placeholder="Title" value=announcementTitle required)
				
				label(id="add-announcement-content-label" class="add-form-label")
					strong Description
					
				textarea(id="add-announcement-content" name="announcement-content" cols="100" rows="10" placeholder="Announcement" value=announcementContent required)
				
				input(id="add-announcement-submit" class="input-button" type="submit" value="Submit")
				
				button(id="hide-add-form-button") Cancel
		
		
		
		
		each val in announcements
			+adminAnnouncementBlock(val)
	
	script.
		$(document).ready(function() {
			//-form hidden by default
			$("#add-announcement-form").toggle();
			
			//-add form submit as ajax call
			$("#add-announcement-form").submit(function(e) {
				e.preventDefault();
			
				var inputs = $("#add-announcement-form :input");
				
				$.ajax({
					url: "/add-announcement",
					type: "POST",
					dataType: "html",
					
					data: inputs,
					
					success: function(data) {
						$("#announcements-content").html(data);
					}
				
				});
			});
			
			//-these two are to show and hide the add form
			$("#show-add-form-button").click(function() {
				$("#add-announcement-form").toggle();
				
				$("#show-add-form-button").toggle();
			
				return false;
			});
			
			$("#hide-add-form-button").click(function() {
				$("#add-announcement-form").toggle();
				
				$("#show-add-form-button").toggle();
				
				return false;
			});
			
			return false;
		}); //end document.ready
		
		
		//called when a delete button is clicked
		function deleteClicked(button) {
			var splitString = button.id.split("-");
			var clickedId = splitString[0];
			
			var confirm = window.confirm("Are you sure you want to delete this announcement?");
			
			if(confirm == true) {
				$.ajax({
					url: "/Announcements/" + clickedId,
					type: "DELETE",
					dataType: "html",
					
					success: function(data) {
						$("#course-links-content").html(data);
					}
				
				});
			}
				
			return false;
		}